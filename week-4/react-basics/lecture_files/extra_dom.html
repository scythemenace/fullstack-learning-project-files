<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <input id="title" type="text" placeholder="title" />
      <br /><br />
      <input id="description" type="text" placeholder="description" />
      <br /><br />
      <button onclick="addTodo()">Add todo</button>
    </div>
    <div id="container"></div>
    <script type="text/javascript">
      let global_id = 0;

      const markAsDone = (id) => {
        const parent = document.getElementById(`${id}`);
        console.log(parent);
        parent.children[2].innerHTML = "Done";
      };
      const addChild = (title, description, id) => {
        const child = document.createElement("div");
        child.setAttribute("id", id);
        const firstGrandChild = document.createElement("div");
        const secondGrandChild = document.createElement("div");
        const thirdGrandChild = document.createElement("button");
        firstGrandChild.innerHTML = title;
        secondGrandChild.innerHTML = description;
        thirdGrandChild.innerHTML = "Mark as Done";
        thirdGrandChild.setAttribute("onclick", `markAsDone(${id})`);
        child.appendChild(firstGrandChild);
        child.appendChild(secondGrandChild);
        child.appendChild(thirdGrandChild);
        return child;
      };
      const addTodo = () => {
        const mainElement = document.getElementById("container");
        const space = document.createElement("br");
        mainElement.appendChild(space);
        mainElement.appendChild(space);
        const title = document.getElementById("title").value;
        const description = document.getElementById("description").value;
        const subElements = addChild(title, description, global_id++);
        console.log(subElements);
        mainElement.appendChild(subElements);
      };
      /*
        Weird way to add elements in a DOM (we just append any new div using concatenate)
        const originalHtml = document.getElementById("container").innerHTML;
        document.getElementById("container").innerHTML =
          originalHtml +
          `<div>
        <div>${title}</div>
        <div>${description}</div>
        <button>Mark as done</button>
      </div>`;
      */
    </script>
  </body>
</html>
